<!DOCTYPE html>
<html>
<head>
<title>MODULE 4</title>
</head>
<body>

<h1>Microcontroller Programming and Access Control Systems</h1>
<h2>Communication protocols</h2>

<p><b>SPI {Serial Periphal Interface}<b><p>
<p>Sends data between a micro-controller and 1 or more intergrated circuit<br>
It is full duplex (data is transmitted and recieved at the same time in high speed)<br>
It is a single master and multi-slave type of communication where each slave has a (ss)slave select line which is used for selecting the desired slave for communication.<br>
It is synchronus therefore it relies on an external clock.</p>


<p><b>SPI PROJECTS<b></p>
  <p><b>Interfacing OLED with PI PICO<b></p>
  
  <p><code>from machine import Pin, SPI<br>
    from ssd1306 import SSD1306_SPI<br>
    import framebuf<br>
    from time import sleep</p>
    
    
    <p>spi = SPI(0, 100000, mosi=Pin(19), sck=Pin(18))<br>
    oled = SSD1306_SPI(128, 64, spi, Pin(17),Pin(20), Pin(16))<br>
    #oled = SSD1306_SPI(WIDTH, HEIGHT, spi, dc,rst, cs) use GPIO PIN NUMBERS<br>
    while True:<br>
        try:<br>
            for i in range(40):<br>
                for j in range(56):</p>
                   
                    <p>oled.fill(0)<br>
                    oled.show()<br>
                    #sleep(1)<br>
                    oled.text("HELLO WORLD",i,j)<br>
                    oled.show()<br>
                    sleep_ms(10)<br>
        except KeyboardInterrupt:<br>
            break</code></body></p>

            <video width="380" height="240" controls>
              <source src="../videos/.mp4" type ="video/mp4">
            Your browser does not support the video tag.
            </video>>


<p><b>Interfacing RFID with PI PICO<b></p>


<p>from machine import Pin<br>
    from mfrc522 import MFRC522<br>
    import utime<br></p>
           
    <p>reader = MFRC522(spi_id=0,sck=2,miso=4,mosi=3,cs=1,rst=0)</p>

    <p>led_green = Pin(6, Pin.OUT)<br>
    led_red = Pin(7, Pin.OUT)<br>
    #blue = Pin(11, Pin.OUT)</p>
    
    <p>print("Bring RFID TAG Closer...")<br>
    print("")</p>
    
    
    <p>while True:<br>
        reader.init()<br>
        (stat, tag_type) = reader.request(reader.REQIDL)<br>
        if stat == reader.OK:<br>
            (stat, uid) = reader.SelectTagSN()<br>
            if stat == reader.OK:<br>
                card = int.from_bytes(bytes(uid),"little",False)</p>
               
                <p>if card == 346217312:<br>
                    print("Card ID: "+ str(card)+" PASS: Green Light Activated")<br>
                    led_red.value(0)<br>
                    led_green.value(1)<br>
                    #blue.value(0)</p>
                   
                   
                <p>elif card == 410761305:<br>
                    print("Card ID: "+ str(card)+" PASS: Blue Light Activated")<br>
                    led_red.value(0)<br>
                    led_green.value(1)<br>
                    #blue.value(1)</p>
                   
                <p>else:<br>
                    print("Card ID: "+ str(card)+" UNKNOWN CARD! Red Light Activated")<br>
                    led_red.value(1)<br>
                    led_green.value(0)<br>
                    #blue.value(0)</p>

                    <video width="380" height="240" controls>
                      <source src="../videos/" type ="video/mp4">
                    Your browser does not support the video tag.
                    </video>>



      
      <p><b>Interfacing ESP32 and OLED<b></p>
        
        <p><a href="/"></a></p>

        <p><code>#include <SPI.h>
            #include <Wire.h><br>
            #include <Adafruit_GFX.h><br>
            #include <Adafruit_SSD1306.h><br>
            
            <p>#define SCREEN_WIDTH 128<br>
            #define SCREEN_HEIGHT 64</p>
            
            <p>#define OLED_MOSI   23<br>
            #define OLED_CLK    18<br>
            #define OLED_DC     16<br>
            #define OLED_CS     5<br>
            #define OLED_RESET  17</p>
            
            <p>Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT,<br>
              OLED_MOSI, OLED_CLK, OLED_DC, OLED_RESET, OLED_CS);</p>

           <p>const unsigned char electronicshub_logo [] PROGMEM = {<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>           
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x03, 0xe0, 0x07, 0xc3, 0x87, 0xcf, 0x03, 0x02, 0x11, 0x07, 0x04, 0x0f, 0xbd, 0xbd, 0xc7, 0x80,<br>
              0x03, 0xe4, 0x07, 0xc3, 0xc7, 0xcf, 0x07, 0x82, 0x11, 0x07, 0x8e, 0x0f, 0xbd, 0xbd, 0xc7, 0x80,<br>
              0x02, 0x04, 0x04, 0x06, 0xc1, 0x01, 0x84, 0xc2, 0x11, 0x0d, 0x8a, 0x0f, 0xbd, 0xbd, 0xf3, 0x80,<br>
              0x02, 0x04, 0x04, 0x04, 0x61, 0x00, 0x88, 0x42, 0x11, 0x08, 0x8a, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x0c, 0x21, 0x00, 0x88, 0x43, 0x11, 0x10, 0x08, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x00, 0x88, 0x23, 0x11, 0x10, 0x08, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x00, 0x88, 0x23, 0x11, 0x10, 0x08, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x00, 0x90, 0x23, 0x11, 0x10, 0x08, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x00, 0x90, 0x22, 0x91, 0x10, 0x08, 0x0f, 0xbd, 0xbd, 0xf7, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x00, 0x90, 0x22, 0x91, 0x10, 0x0e, 0x0f, 0xbd, 0xbd, 0xc7, 0x80,<br>
              0x03, 0x84, 0x07, 0x08, 0x01, 0x00, 0x90, 0x22, 0x91, 0x10, 0x06, 0x0f, 0x81, 0xbd, 0xc7, 0x80,<br>
              0x03, 0x84, 0x07, 0x08, 0x01, 0x07, 0x90, 0x22, 0xd1, 0x10, 0x03, 0x0f, 0x81, 0xbd, 0xf7, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x07, 0x10, 0x22, 0x51, 0x10, 0x01, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x06, 0x10, 0x22, 0x51, 0x10, 0x01, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x02, 0x10, 0x22, 0x51, 0x10, 0x01, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x02, 0x08, 0x22, 0x31, 0x10, 0x01, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x08, 0x01, 0x01, 0x08, 0x22, 0x31, 0x10, 0x01, 0x0f, 0xbd, 0xbd, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x0c, 0x21, 0x01, 0x08, 0x42, 0x31, 0x10, 0x01, 0x0f, 0xbd, 0xdb, 0xfb, 0x80,<br>
              0x02, 0x04, 0x04, 0x04, 0x61, 0x01, 0x88, 0x42, 0x31, 0x08, 0x99, 0x0f, 0xbd, 0xdb, 0xf3, 0x80,<br>
              0x02, 0x04, 0x04, 0x06, 0xc1, 0x00, 0x84, 0xc2, 0x11, 0x0d, 0x8b, 0x0f, 0xbd, 0xc3, 0xc7, 0x80,<br>
              0x03, 0xe7, 0xc7, 0xc3, 0xc1, 0x00, 0x87, 0x82, 0x11, 0x07, 0x8e, 0x0f, 0xbd, 0xe7, 0xc7, 0x80,<br>
              0x03, 0xe7, 0xc7, 0xc3, 0x81, 0x00, 0x83, 0x02, 0x11, 0x07, 0x06, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0x80,<br>
              0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80,<br>
              0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80,<br>
              0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x07, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,<br>
              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00<br>
            };<br>
            
            void setup()<br>
            {<br>
              Serial.begin(115200);<br>
              if(!display.begin(SSD1306_SWITCHCAPVCC))<br>
              {
                Servial.println(F("SSD1306 allocation failed"));<br>
                for(;;);<br>
              }
             
              display.clearDisplay();<br>
              display.display();<br>
              delay(1000);<br>
            
              display.clearDisplay();<br>
              display.drawBitmap(0, 0, electronicshub_logo, SCREEN_WIDTH, SCREEN_HEIGHT, SSD1306_WHITE);<br>        display.display();
              delay(1000);<br>
             
             
            }
            void loop()<br>
            {
              AllPixels();<br>
              TextDisplay();<br>
              InvertedTextDisplay();<br>
              DisplayChars();<br>
              TextSize();<br>
              DrawRectangle();<br>
              DrawFilledRectangle();<br>
              DrawRoundRectangle();<br>
              DrawFilledRoundRectangle();<br>
              DrawCircle();<br>
              DrawFilledCircle();<br>
              DrawTriangle();<br>
              DrawFilledTriangle();<br>
            }</p>
            
            <p>void AllPixels()<br>
            {<br>
              int i;<br>
              int j;<br>
              display.clearDisplay();<br>
              for(i=0;i<64;i++)<br>
              {</p>
                <p>for(j=0;j<128;j++)<br>
                {<br>
                  display.drawPixel(j, i, SSD1306_WHITE);</p>
                 
                <p>}<br>
                display.display();<br>
                delay(30);<br>
              }</p>
             
              <p>for(i=0;i<64;i++)<br>
              {<br>
                for(j=0;j<128;j++)<br>
                {<br>
                  display.drawPixel(j, i, SSD1306_BLACK);<br>
                 
                <p>}<br>
                display.display();<br>
                delay(30);<br>
              }</p>
             
            <p>}</p>
            
            <p>void TextDisplay()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(5,28);<br>
              display.println("Electronics Hub");<br>
              display.display();<br>
              delay(3000);<br>
            }</p>
            
            <p>void InvertedTextDisplay()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextColor(SSD1306_BLACK, SSD1306_WHITE);<br>
              display.setCursor(5,28);<br>
              display.println("Electronics Hub");<br>
              display.display();<br>
              delay(3000);<br>
            }</p>
            
            
            
            <p>void DisplayChars()<br>
            {<br>
              display.clearDisplay();<br>
            
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0, 0);<br>
              display.cp437(true);</p>
             
              <p>for(int16_t i=0; i<256; i++)<br>
              {<br>
                if(i == '\n')<br>
                {<br>
                  display.write(' ');<br>
                }<br>
                else<br>
                {<br>
                  display.write(i);<br>
                }<br>
              }</p>
            
              <p>display.display();<br>
              delay(4000);<br>
            }<br>
            void TextSize()<br>
            {<br>
              display.clearDisplay();</p>
            
              <p>display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0,0);<br>
              display.println(F("Size: 1"));<br>
              display.println(F("ABC"));</p>
            
              <p>display.setTextSize(2);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.println("Size: 2");<br>
              display.println(F("ABC"));</p>
            
              <p>display.display();<br>
              delay(3000);<br>
            }</p>
            
            <p>void DrawRectangle()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextColor(WHITE);<br>
              display.setCursor(0,0);<br>
              display.println("Rectangle");<br>
              display.drawRect(0, 15, 90, 45, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);<br>
            }</p>
            
            <p>void DrawFilledRectangle()<br>
            {<br>
              display.clearDisplay();<br>  
              display.setTextSize(1);<br>
              display.setTextColor(WHITE)<br>;
              display.setCursor(0,0);<br>
              display.println("Filled Rectangle");<br>
              display.fillRect(0, 15, 90, 45, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);</p>
             
            <p>}</p>
            
            <p>void DrawRoundRectangle()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0,0);<br>
              display.println("Round Rectangle");<br>
              display.drawRoundRect(0, 15, 90, 45, 10, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);<br>
            }</p>
            
           <p>void DrawFilledRoundRectangle()<br>
            {<br>
              display.clearDisplay();<br>  
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0,0);<br>
              display.println("Filled Round Rect");<br>
              display.fillRoundRect(0, 15, 90, 45, 10, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);</p>
             
            <p>}</p>
            
            void DrawCircle()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextSize(1);<br>
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0,0);<br>
              display.println("Circle");<br>
              display.drawCircle(30, 36, 25, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);<br>
            }<br>
            void DrawFilledCircle()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0,0);<br>
              display.println("Filled Circle");<br>
              display.fillCircle(30, 36, 25, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);</p>
             
            <p>}</p>
            
            <p>void DrawTriangle()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);
              display.setCursor(0,0);<br>
              display.println("Triangle");<br>
              display.drawTriangle(30, 15, 0, 60, 60, 60, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);<br>  
            }</p>
            
            <p>void DrawFilledTriangle()<br>
            {<br>
              display.clearDisplay();<br>
              display.setTextSize(1);<br>
              display.setTextColor(SSD1306_WHITE);<br>
              display.setCursor(0,0);<br>
              display.println("Filled Triangle");<br>
              display.fillTriangle(30, 15, 0, 60, 60, 60, SSD1306_WHITE);<br>
              display.display();<br>
              delay(2000);<br>
            }</p>
</code></p>

<img src="../images/esp&oled.jpg" width="250" height="200">
<video width="380" height="240" controls>
<source src="../videos/oled-esp32.mp4" type ="video/mp4">
Your browser does not support the video tag.
</video>


<p><b>Interfacing RFID +LED+ BUZZER with ESP32<b></p>
<p><code>#include <SPI.h><br>
       #include <MFRC522.h></p>

      <p>#define RST_PIN 0     // Reset pin for RC522 module<br>
#define SDA_PIN 5      // Slave Select pin for RC522 module<br>
#define LED_GREEN 25<br>
#define LED_RED 2<br>
#define BUZZER 26<br>
        MFRC522 rfid(SDA_PIN, RST_PIN);   // Create MFRC522 instance</p>
 
 
        <p>void setup() {<br>
          pinMode(LED_GREEN, OUTPUT);<br>
          pinMode(LED_RED, OUTPUT);<br>
          pinMode (BUZZER, OUTPUT);<br>
          Serial.begin(9600);<br>
          SPI.begin();<br>
          rfid.PCD_Init();<br>
          Serial.println("RFID Ready!");<br>
          Serial.println("");<br>
        }</p>
        <p>void loop() {<br>
          if (rfid.PICC_IsNewCardPresent() && rfid.PICC_ReadCardSerial()) {<br>
            Serial.print("Card UID:");<br>
            String uid = "";<br>
            for (byte i = 0; i < rfid.uid.size; i++) {<br>
              Serial.print(rfid.uid.uidByte[i] < 0x10 ? "0" : "");<br>
              Serial.print(rfid.uid.uidByte[i], DEC);<br>
              uid.concat(String(rfid.uid.uidByte[i] < 0x10 ? "0" : ""));<br>
              uid.concat(String(rfid.uid.uidByte[i], DEC));<br>
            }<br>
            Serial.println("");<br>
          if( uid =="9621916220" )<br>
                {<br>
                Serial.println("Virginia Njeri");</p>
                
                <p>digitalWrite(LED_GREEN, HIGH);<br> 
                delay(3000); <br>
                digitalWrite(LED_GREEN, LOW);<br>

                }</p>
                
                <p>else if(uid=="9621916220" )<br>
                {<br>
                  
                <br>
                digitalWrite(LED_GREEN, HIGH);<br> 
                delay(3000); <br>
                digitalWrite(LED_GREEN, LOW);</p>

                <p>}</p>

                <p>digitalWrite(LED_RED, HIGH);<br> 
                digitalWrite(BUZZER, HIGH); <br>
                delay(1000); <br>
                digitalWrite(LED_RED, LOW);<br>
                digitalWrite(BUZZER, LOW);<br>

                <p>}</p>

          <p>}<br>
          rfid.PICC_HaltA();<br>
          rfid.PCD_StopCrypto1();<br>
}<br>
</code></p>

<video width="320" height="240" controls>
<source src="../videos/esp32 +buzzer+RFID+LED.mp4" type ="video/mp4">
Your browser does not support the video tag.
</video>



<p><b>I2c{Inter-intergrated circuit}<b></p>
<p>Its a communication protocol that allows multiple electronic devices to<br> communicate with each other using a serial interface.<br>
I2C protocol uses two wires: the SDA(serial Data Line) and SCL (Serial Clock Line) to facilitate communication.<br> SDA is used for transmitting and receiving data, while SCL is used  data transfer between devices.<br>
It supports multi-master and multi-slave communication where the master device initiates communication<br>and the slave acts/responds to the master's commands<br>
Has 2 different kinds of ids: <br>I2c1 <br>I2c0<br>
Also it reduces the amount of pinouts required for communication.</p>

<p>I2c PROJECTS</p>
<p><b>Interfacing OLED & AHT10 to PI PICO <b></p>

<p><code>from machine import Pin, SPI<br>
          from machine import Pin, I2C<br>
          from ssd1306 import SSD1306_SPI<br>
          import framebuf<br>
          import time<br>
          from time import sleep<br>
          import ahtx0<br></code></p>

          
          <p># Create I2C object<br>
          scl = Pin(27)<br>
          sda = Pin(26)<br>
          scl = Pin(27)<br>
          i2c = I2C(1, scl=scl, sda=sda)<br></p>
          
          
          <p># Create the sensor object using I2C<br>
          sensor = ahtx0.AHT10(i2c)<br></p>

          
          <p>spi = SPI(0, 100000, mosi=Pin(19), sck=Pin(18))<br>
          oled = SSD1306_SPI(128, 64, spi, Pin(17), Pin(20), Pin(16))<br></p>
          
          <p>while True:<br>
              temperature = round(sensor.temperature, 2)<br>
              humidity = round(sensor.relative_humidity, 2)<br></p>
          
              <p>oled.fill(0)<br>
              oled.text("Temp: {:.2f} C".format(temperature), 0, 10)<br>
              oled.text("Humidity: {:.2f} %".format(humidity), 0, 30)<br>
              oled.show()<br>
              time.sleep(5)</code></p>

        
<img src="../images/aht1o .jpg" width="250" height="200">

<video width="320" height="240" controls>
<source src="../videos/AHT10 &OLED.mp4" type ="video/mp4">
Your browser does not support the video tag.
</video>>


<p><b>Interfacing AHT10 with ESP32<b></p>
<p><code>#include <Wire.h></p>

            <p>// Define AHT10 register addresses<br>
            #define AHT10_ADDR 0x38<br>
            #define CMD_MEASURE 0xAC<br>
            #define CMD_SOFTRESET 0xBA<br>
            #define STATUS_BUSY_MASK 0x80</p>
            
            <p>// Define I2C0 pins<br>
            #define SDA_PIN 21<br>
            #define SCL_PIN 22</p>
            
            <p>// Global variables for sensor data<br>
            float temperature = 0.0;<br>
            float humidity = 0.0;</p>
            
            <p>// Function to read AHT10 sensor<br>
            void readAHT10() {<br>
              // Send measurement command to AHT10<br>
              Wire.beginTransmission(AHT10_ADDR);<br>
              Wire.write(CMD_MEASURE);<br>
              Wire.write(0x33);<br>
              Wire.write(0x00);<br>
              Wire.endTransmission();</p>
              
              <p>// Wait for measurement to complete<br>
              while (true) {<br>
                Wire.beginTransmission(AHT10_ADDR);<br>
                Wire.write(0x71);<br>
                Wire.endTransmission(false);<br>
                Wire.requestFrom(AHT10_ADDR, 1);<br>
                if ((Wire.read() & STATUS_BUSY_MASK) == 0) break;<br>
                delay(10);<br>
              }</p>
            
              <p>// Read measurement data from AHT10<br>
              Wire.beginTransmission(AHT10_ADDR);<br>
              Wire.write(0x00);<br>
              Wire.endTransmission(false);<br>
              Wire.requestFrom(AHT10_ADDR, 6);<br>
              uint8_t msb = Wire.read();<br>
              uint8_t lsb = Wire.read();<br>
              uint8_t cksum = Wire.read();<br>
              uint32_t raw_data = ((msb << 16) | (lsb << 8) | cksum) >> 4;</p>
            
              <p>// Convert raw data to temperature and humidity<br>
              temperature = (float)(raw_data * 200.0 / 1048576.0) - 50.0;<br>
              humidity = (float)(raw_data * 100.0 / 1048576.0);<br>
            }</p>
            
            <p>void setup() {<br>
              // Initialize serial communication<br>
              Serial.begin(9600);</p>
            
              <p>// Initialize I2C communication on I2C0 with custom SDA and SCL pins<br>
              Wire.begin(SDA_PIN, SCL_PIN);</p>
              
              <p>// Soft reset AHT10<br>
              Wire.beginTransmission(AHT10_ADDR);<br>
              Wire.write(CMD_SOFTRESET);<br>
              Wire.endTransmission();<br>
              delay(20);<br>
            }</p>
            
            <p>void loop() {<br>
              // Read data from AHT10<br>
              readAHT10();</p>
            
              <p>// Print temperature and humidity values to serial monitor<br>
              Serial.print("Temperature: ");<br>
              Serial.print(temperature, 2); // round to 2 decimal places<br>
              Serial.print(" C, Humidity: ");<br>
              Serial.print(humidity, 2); // round to 2 decimal places<br>
              Serial.println(" %");</p>
            
              <p>// Wait 1 second before taking another measurement<br>
              delay(1000);<br>
            }</code></p>

<video width="350" height="240" controls>
<source src="../videos/esp32-ahto.mp4" type ="video/mp4">
Your browser does not support the video tag.
</video>>



<p><b>Interfacing AHT10 and OLED with esp32<b></p>
        <p><code>#include <Wire.h></p>

      <p>// Define AHT10 register addresses<br>
      #define AHT10_ADDR 0x38<br>
      #define CMD_MEASURE 0xAC<br>
      #define CMD_SOFTRESET 0xBA<br>
      #define STATUS_BUSY_MASK 0x80</p>

      <p>// Define I2C0 pins<br>
      #define SDA_PIN 21<br>
      #define SCL_PIN 22</p>

      <p>// Global variables for sensor data<br>
      float temperature = 0.0;<br>
      float humidity = 0.0;</p>

      <p>// Function to read AHT10 sensor<br>
      void readAHT10() {<br>
        // Send measurement command to AHT10<br>
        Wire.beginTransmission(AHT10_ADDR);<br>
        Wire.write(CMD_MEASURE);<br>
        Wire.write(0x33);<br>
        Wire.write(0x00);<br>
        Wire.endTransmission();</p>
        
        <p>// Wait for measurement to complete<br>
        while (true) {<br>
          Wire.beginTransmission(AHT10_ADDR);<br>
          Wire.write(0x71);<br>
          Wire.endTransmission(false);<br>
          Wire.requestFrom(AHT10_ADDR, 1);<br>
          if ((Wire.read() & STATUS_BUSY_MASK) == 0) break;<br>
          delay(10);<br>
        }</p>

        <p>// Read measurement data from AHT10<br>
        Wire.beginTransmission(AHT10_ADDR);<br>
        Wire.write(0x00);<br>
        Wire.endTransmission(false);<br>
        Wire.requestFrom(AHT10_ADDR, 6);<br>
        uint8_t msb = Wire.read();<br>
        uint8_t lsb = Wire.read();<br>
        uint8_t cksum = Wire.read();<br>
        uint32_t raw_data = ((msb << 16) | (lsb << 8) | cksum) >> 4;</p>

        <p>// Convert raw data to temperature and humidity<br>
        temperature = (float)(raw_data * 200.0 / 1048576.0) - 50.0;<br>
        humidity = (float)(raw_data * 100.0 / 1048576.0);<br>
      }</p>

      <p>void setup() {<br>
        // Initialize serial communication<br>
        Serial.begin(9600);</p>

        <p>// Initialize I2C communication on I2C0 with custom SDA and SCL pins<br>
        Wire.begin(SDA_PIN, SCL_PIN);</p>
        
        <p>// Soft reset AHT10<br>
        Wire.beginTransmission(AHT10_ADDR);<br>
        Wire.write(CMD_SOFTRESET);<br>
        Wire.endTransmission();<br>
        delay(20);<br>
      }</p>

      <p>void loop() {<br>
        // Read data from AHT10<br>
        readAHT10();</p>

        <p>// Print temperature and humidity values to serial monitor<br>
        Serial.print("Temperature: ");<br>
        Serial.print(temperature, 2); // round to 2 decimal places<br>
        Serial.print(" C, Humidity: ");<br>
        Serial.print(humidity, 2); // round to 2 decimal places<br>
        Serial.println(" %");</p>

        <p>// Wait 1 second before taking another measurement<br>
        delay(1000);<br>
      }<br>
</code></p>

<img src="../images/OLED+AHT10+ESP32.jpg" width="250" height="200">

<video width="350" height="240" controls>
<source src="../videos/OLED&AHT10 &ESP.mp4" type ="video/mp4">
Your browser does not support the video tag.
</video>>


<p><b>{UART} short for Universal Asynchronus Reciever/Transmitter<b></p>
It defines a protocol or set of rules for exchanging serial data between 2 devices. <br>
The main purpose is to transmit and recieve serial data and does not rely on an external clock.<br>
UART is a stand alone ic or physical circuit in a micro-controller.<br>
It is ideal for lowpower and long distance communication and it is <b> NOT</b> a protocol.</p>

<p>Interfacing RPI Pico and ESP32 using serial</p>
    
<p><code>bool ledState=1; //variable used to save the state of LED<br>
      void setup() {<br>
        Serial.begin(9600);// set baud rate to 9600<br>
        pinMode(LED_BUILTIN, OUTPUT);<br>
      }</p>

      <p>void loop() {<br> 
        if(Serial.read()== 't') {<br>
        digitalWrite(LED_BUILTIN, ledState);<br>
        ledState=!ledState;<br>
        Serial.print('m'); //write 'm' to the UART<br>
        }<br>
      }</code></p>

          
          <p><code>from machine import Pin,UART<br>
      import time<br>
      uart = UART(1, baudrate=9600, tx=Pin(4), rx=Pin(5))<br>
      uart.init(bits=8, parity=None, stop=2)<br>
      led = Pin("LED", Pin.OUT)</p>

      <p>while True:<br>
          uart.write('t')<br>
          if uart.any():<br>
              data = uart.read()<br>
              if data== b'm':<br>
                  led.toggle()<br>
          time.sleep(1)
</code></p>

<video width="380" height="240" controls>
<source src="../videos/esp32-pico.mp4" type ="video/mp4">
Your browser does not support the video tag.
</video>



  

</body>
  
</html>


